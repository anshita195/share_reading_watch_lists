(()=>{function e(){const e=document.querySelector('main, article, [role="main"], .main-content, #main-content');return e?e.innerText:document.body.innerText}function t(){if(document.querySelectorAll("video").length>0)return!0;if(["youtube.com/watch","youtu.be/","vimeo.com/","dailymotion.com/video","twitch.tv/videos","facebook.com/watch","bilibili.com/video","netflix.com/watch","primevideo.com/detail","hotstar.com","zee5.com","mxplayer.in","sonyliv.com","disneyplus.com","hulu.com/watch","hbomax.com","crunchyroll.com/watch"].some(e=>window.location.href.includes(e)))return!0;if(document.querySelector('meta[property="og:video"]'))return!0;const e=['iframe[src*="youtube.com/embed"]','iframe[src*="player.vimeo.com"]','iframe[src*="dailymotion.com/embed"]','iframe[src*="twitch.tv"]','iframe[src*="facebook.com/plugins/video"]'];for(const t of e)if(document.querySelector(t))return!0;return!1}function o(){return document.querySelectorAll('article, [role="article"], .article, .post, .blog-post').length>0}console.log("Reading & Watch List Tracker content script loaded"),chrome.runtime.sendMessage({type:"PAGE_LOADED",data:{url:window.location.href,title:document.title,isVideo:t(),isArticle:o(),content:e(),timestamp:(new Date).toISOString()}});let i=location.href;new MutationObserver(()=>{const c=location.href;c!==i&&(i=c,chrome.runtime.sendMessage({type:"PAGE_LOADED",data:{url:window.location.href,title:document.title,isVideo:t(),isArticle:o(),content:e(),timestamp:(new Date).toISOString()}}))}).observe(document,{subtree:!0,childList:!0})})();